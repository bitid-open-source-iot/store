(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"862v":function(t,e,r){"use strict";r.r(e),r.d(e,"MapPageModule",(function(){return T}));var i=r("mrSG"),s=r("HYeg"),o=r("fXoL"),n=r("esXn"),a=r("tyNb"),h=r("X849"),c=r("BhS5"),l=r("MNdm"),p=r("4jEk"),u=r("pxUr"),d=r("HDdC");r("c+JA");let g=(()=>{let t=class extends u.g{constructor(t,e){super(t,e),this._mapsWrapper=t,this._zone=e,this._clustererInstance=new Promise(t=>{this._resolver=t})}init(t){this._mapsWrapper.getNativeMap().then(e=>{const r=new MarkerClusterer(e,[],t);this._resolver(r)})}getClustererInstance(){return this._clustererInstance}addMarker(t){const e=this.getClustererInstance(),r=this._mapsWrapper.createMarker({position:{lat:t.latitude,lng:t.longitude},label:t.label,draggable:t.draggable,icon:t.iconUrl,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,title:t.title,clickable:t.clickable},!1);Promise.all([e,r]).then(([t,e])=>t.addMarker(e)),this._markers.set(t,r)}deleteMarker(t){const e=this._markers.get(t);return null==e?Promise.resolve():e.then(e=>{this._zone.run(()=>{e.setMap(null),this.getClustererInstance().then(r=>{r.removeMarker(e),this._markers.delete(t)})})})}clearMarkers(){return this.getClustererInstance().then(t=>{t.clearMarkers()})}setGridSize(t){this.getClustererInstance().then(e=>{e.setGridSize(t.gridSize)})}setMaxZoom(t){this.getClustererInstance().then(e=>{e.setMaxZoom(t.maxZoom)})}setStyles(t){this.getClustererInstance().then(e=>{e.setStyles(t.styles)})}setZoomOnClick(t){this.getClustererInstance().then(e=>{void 0!==t.zoomOnClick&&(e.zoomOnClick_=t.zoomOnClick)})}setAverageCenter(t){this.getClustererInstance().then(e=>{void 0!==t.averageCenter&&(e.averageCenter_=t.averageCenter)})}setImagePath(t){this.getClustererInstance().then(e=>{void 0!==t.imagePath&&(e.imagePath_=t.imagePath)})}setMinimumClusterSize(t){this.getClustererInstance().then(e=>{void 0!==t.minimumClusterSize&&(e.minimumClusterSize_=t.minimumClusterSize)})}setImageExtension(t){this.getClustererInstance().then(e=>{void 0!==t.imageExtension&&(e.imageExtension_=t.imageExtension)})}createClusterEventObservable(t){return d.a.create(e=>{this._zone.runOutsideAngular(()=>{this._clustererInstance.then(r=>{r.addListener(t,t=>this._zone.run(()=>e.next(t)))})})})}setCalculator(t){this.getClustererInstance().then(e=>{"function"==typeof t.calculator&&e.setCalculator(t.calculator)})}};return t.\u0275fac=function(e){return new(e||t)(o.Ub(u.e),o.Ub(o.z))},t.\u0275prov=o.Gb({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),m=(()=>{let t=class{constructor(t){this._clusterManager=t,this.clusterClick=new o.n,this._observableSubscriptions=[]}ngOnDestroy(){this._clusterManager.clearMarkers(),this._observableSubscriptions.forEach(t=>t.unsubscribe())}ngOnChanges(t){t.gridSize&&this._clusterManager.setGridSize(this),t.maxZoom&&this._clusterManager.setMaxZoom(this),t.zoomOnClick&&this._clusterManager.setZoomOnClick(this),t.averageCenter&&this._clusterManager.setAverageCenter(this),t.minimumClusterSize&&this._clusterManager.setMinimumClusterSize(this),t.imagePath&&this._clusterManager.setImagePath(this),t.imageExtension&&this._clusterManager.setImageExtension(this),t.calculator&&this._clusterManager.setCalculator(this),t.styles&&this._clusterManager.setStyles(this)}_addEventListeners(){[{name:"clusterclick",handler:()=>this.clusterClick.emit()}].forEach(t=>{const e=this._clusterManager.createClusterEventObservable(t.name).subscribe(t.handler);this._observableSubscriptions.push(e)})}ngOnInit(){this._addEventListeners(),this._clusterManager.init({gridSize:this.gridSize,maxZoom:this.maxZoom,zoomOnClick:this.zoomOnClick,averageCenter:this.averageCenter,minimumClusterSize:this.minimumClusterSize,styles:this.styles,imagePath:this.imagePath,imageExtension:this.imageExtension,calculator:this.calculator})}};return t.\u0275fac=function(e){return new(e||t)(o.Kb(g))},t.\u0275dir=o.Fb({type:t,selectors:[["agm-marker-cluster"]],inputs:{gridSize:"gridSize",maxZoom:"maxZoom",zoomOnClick:"zoomOnClick",averageCenter:"averageCenter",minimumClusterSize:"minimumClusterSize",styles:"styles",calculator:"calculator",imagePath:"imagePath",imageExtension:"imageExtension"},outputs:{clusterClick:"clusterClick"},features:[o.yb([g,{provide:u.g,useExisting:g},u.f]),o.xb]}),t})(),_=(()=>{let t=class{};return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(e){return new(e||t)},imports:[[u.a]]}),t})();var f=r("ofXK");const y=["*"];let v=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.position={x:0,left:0}}move(t){if(this.holding){let e=0;t instanceof MouseEvent?(e=t.clientX-this.position.x,this.el.nativeElement.offsetParent.scrollLeft=this.position.left-e):TouchEvent}}hold(t){this.holding=!0;const e=this.el.nativeElement.getBoundingClientRect();t instanceof MouseEvent?(this.position.x=t.clientX,this.position.left=e.left):TouchEvent,this.renderer.setStyle(this.el.nativeElement,"cursor","grabbing")}release(t){this.holding=!1,this.renderer.setStyle(this.el.nativeElement,"cursor","pointer")}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(o.l),o.Kb(o.E))},t.\u0275cmp=o.Eb({type:t,selectors:[["mat-carousel-tile"]],ngContentSelectors:y,decls:2,vars:0,consts:[[1,"mat-carousel-tile-content"]],template:function(t,e){1&t&&(o.hc(),o.Qb(0,"div",0),o.gc(1),o.Pb())},styles:["mat-carousel-tile{margin:8px;cursor:pointer;display:inline-block;overflow:hidden;border-radius:8px;flex-direction:row}mat-carousel-tile .mat-carousel-tile-content{display:flex;flex-direction:row}"],encapsulation:2}),t})();var C=r("FKr1"),M=r("wPwC");function k(t,e){if(1&t){const t=o.Rb();o.Qb(0,"agm-marker",4),o.Yb("markerClick",(function(){o.oc(t);const r=e.$implicit;return o.cc().view(r)})),o.Pb()}if(2&t){const t=e.$implicit,r=o.cc();o.ic("title",t.title)("iconUrl",t.productId==r.productId?"./assets/marker-selected.png":"./assets/marker.png")("latitude",t.location.latitude)("longitude",t.location.longitude)("agmFitBounds",!0)("markerClickable",!0)}}function x(t,e){if(1&t&&(o.Qb(0,"small"),o.yc(1),o.dc(2,"currency"),o.Pb()),2&t){const t=o.cc(2);o.zb(1),o.Ac(" ",o.fc(2,1,t.product.price,"R")," ")}}const b=function(t){return["/product",t]};function P(t,e){if(1&t&&(o.Qb(0,"mat-carousel-tile",5),o.Lb(1,"div",6),o.Qb(2,"div",7),o.Lb(3,"mat-stars",8),o.Qb(4,"h3"),o.yc(5),o.Pb(),o.Qb(6,"h4"),o.yc(7),o.dc(8,"currency"),o.dc(9,"currency"),o.xc(10,x,3,4,"small",9),o.Pb(),o.Pb(),o.Pb()),2&t){const t=o.cc();o.ic("routerLink",o.jc(13,b,t.product.productId)),o.zb(1),o.uc("background-image","url("+t.product.image+")"),o.zb(2),o.ic("value",t.product.score),o.zb(2),o.Ac(" ",t.product.title," "),o.zb(2),o.Ac(" ",t.product.promotion.enabled?o.fc(8,7,t.product.promotion.price,"R"):o.fc(9,10,t.product.price,"R")," "),o.zb(3),o.ic("ngIf",t.product.promotion.enabled)}}let w=(()=>{class t{constructor(t,e,r,i,s){this.cart=t,this.route=e,this.products=r,this.buttons=i,this.wishlist=s}list(){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.products.list({filter:["price","title","score","image","location","promotion","productId"],location:{enabled:!0}});if(t.ok){this.products.data=t.result.map(t=>new s.a(t));const e=this.route.snapshot.queryParams;if(void 0!==e.productId&&null!=e.productId)for(let t=0;t<this.products.data.length;t++)if(this.products.data[t].productId==e.productId){this.view(this.products.data[t]);break}}else this.products.data=[];this.loading=!1}))}view(t){this.product&&this.product.productId==t.productId?(delete this.product,this.productId=null):(this.product=t,this.productId=t.productId)}AddToCart(t,e){return Object(i.a)(this,void 0,void 0,(function*(){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.cart.add(e)}))}AddToWishlist(t,e){return Object(i.a)(this,void 0,void 0,(function*(){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.wishlist.add(e)}))}ngOnInit(){this.buttons.show("cart"),this.buttons.hide("close"),this.buttons.hide("search"),this.buttons.show("wishlist"),this.list()}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(n.a),o.Kb(a.a),o.Kb(h.a),o.Kb(c.a),o.Kb(l.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["map-page"]],decls:5,vars:3,consts:[[3,"fitBounds"],["imagePath","https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m"],[3,"title","iconUrl","latitude","longitude","agmFitBounds","markerClickable","markerClick",4,"ngFor","ngForOf"],["matRipple","",3,"routerLink",4,"ngIf"],[3,"title","iconUrl","latitude","longitude","agmFitBounds","markerClickable","markerClick"],["matRipple","",3,"routerLink"],[1,"image"],[1,"details"],["size","16",3,"value"],[4,"ngIf"]],template:function(t,e){1&t&&(o.Qb(0,"mat-content"),o.Qb(1,"agm-map",0),o.Qb(2,"agm-marker-cluster",1),o.xc(3,k,1,6,"agm-marker",2),o.Pb(),o.Pb(),o.xc(4,P,11,15,"mat-carousel-tile",3),o.Pb()),2&t&&(o.zb(1),o.ic("fitBounds",!0),o.zb(2),o.ic("ngForOf",e.products.data),o.zb(1),o.ic("ngIf",e.product))},directives:[p.a,u.c,m,f.m,f.n,u.d,u.b,v,C.m,a.d,M.a],pipes:[f.d],styles:["mat-content[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%]{width:100%;height:100%}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]{left:calc(50% - 250px);width:100%;height:125px;margin:auto!important;bottom:16px;display:block;position:fixed;max-width:500px;box-shadow:0 1px 4px -1px rgba(0,0,0,.3);background-color:#fff}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30%;height:125px;background-size:cover;background-color:#fafafa;background-repeat:no-repeat;background-position:50%}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;padding:8px 16px;flex-direction:column}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   mat-stars[_ngcontent-%COMP%]{margin-bottom:8px}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{height:18px;font-size:16px;line-height:18px;font-weight:500;margin-bottom:2px!important;text-transform:uppercase}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{height:16px;font-size:14px;line-height:16px;text-transform:uppercase}mat-content[_ngcontent-%COMP%]   mat-carousel-tile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{overflow:hidden}@media screen and (max-width:532px){mat-carousel-tile[_ngcontent-%COMP%]{left:16px!important;width:calc(100% - 32px)!important}}"]}),t})();var z=r("UoUE"),S=r("NFeN"),I=r("bTqV"),O=r("H0Zp");let E=(()=>{class t{}return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(e){return new(e||t)},imports:[[f.c]]}),t})();var L=r("AytR");const A=[{path:"",component:w}];let T=(()=>{class t{}return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(e){return new(e||t)},imports:[[z.a,f.c,S.b,C.n,I.c,O.a,E,_,a.g.forChild(A),u.a.forRoot({apiKey:L.a.googleMapsApiKey,libraries:["places"]})]]}),t})()},"c+JA":function(t,e){function r(t,e,i){this.extend(r,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=i||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,null!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var o=this;google.maps.event.addListener(this.map_,"zoom_changed",(function(){var t=o.map_.getZoom();o.prevZoom_!=t&&(o.prevZoom_=t,o.resetViewport())})),google.maps.event.addListener(this.map_,"idle",(function(){o.redraw()})),e&&e.length&&this.addMarkers(e,!1)}function i(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new s(this,t.getStyles(),t.getGridSize())}function s(t,e,r){t.getMarkerClusterer().extend(s,google.maps.OverlayView),this.styles_=e,this.padding_=r||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}r.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",r.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",r.prototype.extend=function(t,e){return(function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}).apply(t,[e])},r.prototype.onAdd=function(){this.setReady_(!0)},r.prototype.draw=function(){},r.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},r.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),r=new google.maps.LatLngBounds,i=0;t=e[i];i++)r.extend(t.getPosition());this.map_.fitBounds(r)},r.prototype.setStyles=function(t){this.styles_=t},r.prototype.getStyles=function(){return this.styles_},r.prototype.isZoomOnClick=function(){return this.zoomOnClick_},r.prototype.isAverageCenter=function(){return this.averageCenter_},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getTotalMarkers=function(){return this.markers_.length},r.prototype.setMaxZoom=function(t){this.maxZoom_=t},r.prototype.getMaxZoom=function(){return this.maxZoom_},r.prototype.calculator_=function(t,e){for(var r=0,i=t.length,s=i;0!==s;)s=parseInt(s/10,10),r++;return{text:i,index:r=Math.min(r,e)}},r.prototype.setCalculator=function(t){this.calculator_=t},r.prototype.getCalculator=function(){return this.calculator_},r.prototype.addMarkers=function(t,e){for(var r,i=0;r=t[i];i++)this.pushMarkerTo_(r);e||this.redraw()},r.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",(function(){t.isAdded=!1,e.repaint()}))}this.markers_.push(t)},r.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},r.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var r,i=0;r=this.markers_[i];i++)if(r==t){e=i;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},r.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);return!(e||!r||(this.resetViewport(),this.redraw(),0))},r.prototype.removeMarkers=function(t,e){for(var r,i=!1,s=0;r=t[s];s++){var o=this.removeMarker_(r);i=i||o}if(!e&&i)return this.resetViewport(),this.redraw(),!0},r.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},r.prototype.getTotalClusters=function(){return this.clusters_.length},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(t){this.map_=t},r.prototype.getGridSize=function(){return this.gridSize_},r.prototype.setGridSize=function(t){this.gridSize_=t},r.prototype.getMinClusterSize=function(){return this.minClusterSize_},r.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},r.prototype.getExtendedBounds=function(t){var e=this.getProjection(),r=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),s=e.fromLatLngToDivPixel(r);s.x+=this.gridSize_,s.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(i);o.x-=this.gridSize_,o.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(s),a=e.fromDivPixelToLatLng(o);return t.extend(n),t.extend(a),t},r.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},r.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},r.prototype.resetViewport=function(t){for(var e,r=0;e=this.clusters_[r];r++)e.remove();var i;for(r=0;i=this.markers_[r];r++)i.isAdded=!1,t&&i.setMap(null);this.clusters_=[]},r.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout((function(){for(var e,r=0;e=t[r];r++)e.remove()}),0)},r.prototype.redraw=function(){this.createClusters_()},r.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var r=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371},r.prototype.addToClosestCluster_=function(t){for(var e,r=4e4,s=null,o=(t.getPosition(),0);e=this.clusters_[o];o++){var n=e.getCenter();if(n){var a=this.distanceBetweenPoints_(n,t.getPosition());a<r&&(r=a,s=e)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((e=new i(this)).addMarker(t),this.clusters_.push(e))},r.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(e),i=0;t=this.markers_[i];i++)!t.isAdded&&this.isMarkerInBounds_(t,r)&&this.addToClosestCluster_(t)},i.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,r=0;e=this.markers_[r];r++)if(e==t)return!0;return!1},i.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,r=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,i=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(r,i),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var s=this.markers_.length;if(s<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),s==this.minClusterSize_)for(var o=0;o<s;o++)this.markers_[o].setMap(null);return s>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},i.prototype.getMarkerClusterer=function(){return this.markerClusterer_},i.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),i=0;t=r[i];i++)e.extend(t.getPosition());return e},i.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},i.prototype.getSize=function(){return this.markers_.length},i.prototype.getMarkers=function(){return this.markers_},i.prototype.getCenter=function(){return this.center_},i.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},i.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},i.prototype.getMap=function(){return this.map_},i.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var r,i=0;r=this.markers_[i];i++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var s=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},s.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},s.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",(function(){e.triggerClusterClick()}))},s.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},s.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},s.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},s.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},s.prototype.remove=function(){this.setMap(null)},s.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},s.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},s.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},s.prototype.setCenter=function(t){this.center_=t},s.prototype.createCss=function(t){var e=[];return e.push("background-image:url("+this.url_+");"),e.push("background-position:"+(this.backgroundPosition_?this.backgroundPosition_:"0 0")+";"),"object"==typeof this.anchor_?(e.push("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;":"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?"height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;":"height:"+this.height_+"px; line-height:"+this.height_+"px;"),e.push("number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;"),e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+(this.textColor_?this.textColor_:"black")+"; position:absolute; font-size:"+(this.textSize_?this.textSize_:11)+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=r,r.prototype.addMarker=r.prototype.addMarker,r.prototype.addMarkers=r.prototype.addMarkers,r.prototype.clearMarkers=r.prototype.clearMarkers,r.prototype.fitMapToMarkers=r.prototype.fitMapToMarkers,r.prototype.getCalculator=r.prototype.getCalculator,r.prototype.getGridSize=r.prototype.getGridSize,r.prototype.getExtendedBounds=r.prototype.getExtendedBounds,r.prototype.getMap=r.prototype.getMap,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.getMaxZoom=r.prototype.getMaxZoom,r.prototype.getStyles=r.prototype.getStyles,r.prototype.getTotalClusters=r.prototype.getTotalClusters,r.prototype.getTotalMarkers=r.prototype.getTotalMarkers,r.prototype.redraw=r.prototype.redraw,r.prototype.removeMarker=r.prototype.removeMarker,r.prototype.removeMarkers=r.prototype.removeMarkers,r.prototype.resetViewport=r.prototype.resetViewport,r.prototype.repaint=r.prototype.repaint,r.prototype.setCalculator=r.prototype.setCalculator,r.prototype.setGridSize=r.prototype.setGridSize,r.prototype.setMaxZoom=r.prototype.setMaxZoom,r.prototype.onAdd=r.prototype.onAdd,r.prototype.draw=r.prototype.draw,i.prototype.getCenter=i.prototype.getCenter,i.prototype.getSize=i.prototype.getSize,i.prototype.getMarkers=i.prototype.getMarkers,s.prototype.onAdd=s.prototype.onAdd,s.prototype.draw=s.prototype.draw,s.prototype.onRemove=s.prototype.onRemove}}]);