(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{b5pT:function(t,e,s){"use strict";s.r(e),s.d(e,"ReviewsPageModule",(function(){return Z}));var i=s("mrSG");class o{constructor(t){this.store={description:null},this.product={title:null},void 0!==t&&null!=t&&(void 0!==t.store&&null!=t.store&&void 0!==t.store.description&&null!=t.store.description&&(this.store.description=t.store.description),void 0!==t.product&&null!=t.product&&void 0!==t.product.title&&null!=t.product.title&&(this.product.title=t.product.title),void 0!==t.role&&null!=t.role&&(this.role=t.role),void 0!==t.role&&null!=t.role&&(this.role=t.role),void 0!==t.score&&null!=t.score&&(this.score=t.score),void 0!==t.status&&null!=t.status&&(this.status=t.status),void 0!==t.storeId&&null!=t.storeId&&(this.storeId=t.storeId),void 0!==t.message&&null!=t.message&&(this.message=t.message),void 0!==t.reviewId&&null!=t.reviewId&&(this.reviewId=t.reviewId),void 0!==t.productId&&null!=t.productId&&(this.productId=t.productId))}}var c=s("Dh3D"),r=s("+0xr"),n=s("fXoL"),a=s("u0tM"),d=s("9ZKQ"),l=s("IwJj"),u=s("BhS5"),b=s("4jEk"),p=s("ofXK"),m=s("bv9b"),h=s("NFeN");let f=(()=>{class t{constructor(){this.size=16,this.value=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["mat-stars"]],inputs:{size:"size",value:"value"},decls:10,vars:40,template:function(t,e){1&t&&(n.Sb(0,"mat-icon"),n.Cc(1,"star"),n.Rb(),n.Sb(2,"mat-icon"),n.Cc(3,"star"),n.Rb(),n.Sb(4,"mat-icon"),n.Cc(5,"star"),n.Rb(),n.Sb(6,"mat-icon"),n.Cc(7,"star"),n.Rb(),n.Sb(8,"mat-icon"),n.Cc(9,"star"),n.Rb()),2&t&&(n.xc("width",e.size,"px")("height",e.size,"px")("font-size",e.size,"px"),n.Eb("active",e.value>=1),n.Ab(2),n.xc("width",e.size,"px")("height",e.size,"px")("font-size",e.size,"px"),n.Eb("active",e.value>=2),n.Ab(2),n.xc("width",e.size,"px")("height",e.size,"px")("font-size",e.size,"px"),n.Eb("active",e.value>=3),n.Ab(2),n.xc("width",e.size,"px")("height",e.size,"px")("font-size",e.size,"px"),n.Eb("active",e.value>=4),n.Ab(2),n.xc("width",e.size,"px")("height",e.size,"px")("font-size",e.size,"px"),n.Eb("active",e.value>=5))},directives:[h.a],styles:["mat-stars{display:flex;flex-direction:row}mat-stars mat-icon{color:#e0e0e0}mat-stars mat-icon.active{color:#ffc107}"],encapsulation:2}),t})();var v=s("bTqV");function w(t,e){1&t&&n.Nb(0,"mat-progress-bar",13)}function g(t,e){1&t&&(n.Sb(0,"th",14),n.Cc(1," Store "),n.Rb())}function C(t,e){if(1&t&&(n.Sb(0,"td",15),n.Cc(1),n.Rb()),2&t){const t=e.$implicit;n.Ab(1),n.Ec(" ",t.store.description," ")}}function R(t,e){1&t&&(n.Sb(0,"th",14),n.Cc(1," Product "),n.Rb())}function A(t,e){if(1&t&&(n.Sb(0,"td",15),n.Cc(1),n.Rb()),2&t){const t=e.$implicit;n.Ab(1),n.Ec(" ",t.product.title," ")}}function S(t,e){1&t&&(n.Sb(0,"th",14),n.Cc(1," Message "),n.Rb())}function x(t,e){if(1&t&&(n.Sb(0,"td",15),n.Cc(1),n.Rb()),2&t){const t=e.$implicit;n.Ab(1),n.Ec(" ",t.message," ")}}function z(t,e){1&t&&(n.Sb(0,"th",14),n.Cc(1," Score "),n.Rb())}function I(t,e){if(1&t&&(n.Sb(0,"td",15),n.Nb(1,"mat-stars",16),n.Rb()),2&t){const t=e.$implicit;n.Ab(1),n.kc("value",t.score)}}function k(t,e){1&t&&(n.Sb(0,"th",14),n.Cc(1," Status "),n.Rb())}function D(t,e){if(1&t&&(n.Sb(0,"td",15),n.Sb(1,"span"),n.Cc(2),n.Rb(),n.Rb()),2&t){const t=e.$implicit;n.Ab(1),n.Eb("pending","pending approval"==t.status)("rejected","rejected"==t.status)("approved","approved"==t.status),n.Ab(1),n.Ec(" ",t.status," ")}}function P(t,e){1&t&&n.Nb(0,"th",17)}function y(t,e){if(1&t){const t=n.Tb();n.Sb(0,"td",15),n.Sb(1,"button",18),n.ac("click",(function(){n.rc(t);const s=e.$implicit;return n.ec().options(s)})),n.Sb(2,"mat-icon"),n.Cc(3," more_vert "),n.Rb(),n.Rb(),n.Rb()}}function M(t,e){1&t&&n.Nb(0,"tr",19)}function j(t,e){1&t&&n.Nb(0,"tr",20)}let O=(()=>{class t{constructor(t,e,s,i){this.sheet=t,this.toast=e,this.service=s,this.buttons=i,this.columns=["store.description","product.title","message","score","status","options"],this.reviews=new r.o,this.subscriptions={}}list(){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.service.list({sort:{description:1},filter:["role","store","score","status","message","product","reviewId"]});this.reviews.data=t.ok?t.result.map(t=>new o(t)):[],this.loading=!1}))}options(t){return Object(i.a)(this,void 0,void 0,(function*(){this.sheet.show({role:t.role,title:t.message,options:[{icon:"thumb_up_alt",title:"Approve Review",handler:()=>Object(i.a)(this,void 0,void 0,(function*(){const e=yield this.service.approve({reviewId:t.reviewId});if(e.ok){for(let e=0;e<this.reviews.data.length;e++)if(this.reviews.data[e].reviewId==t.reviewId){this.reviews.data[e].status="approved";break}this.toast.success("Review was approved!")}else this.toast.error(e.error.message)})),disabled:[0,1]},{icon:"thumb_down_alt",title:"Reject Review",handler:()=>Object(i.a)(this,void 0,void 0,(function*(){const e=yield this.service.reject({reviewId:t.reviewId});if(e.ok){for(let e=0;e<this.reviews.data.length;e++)if(this.reviews.data[e].reviewId==t.reviewId){this.reviews.data[e].status="rejected";break}this.toast.success("Review was rejected!")}else this.toast.error(e.error.message)})),disabled:[0,1]}]})}))}ngOnInit(){this.buttons.hide("add"),this.buttons.hide("close"),this.buttons.hide("filter"),this.buttons.hide("search"),this.sort.active="message",this.sort.direction="desc",this.reviews.sort=this.sort,this.list()}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(a.a),n.Mb(d.a),n.Mb(l.a),n.Mb(u.a))},t.\u0275cmp=n.Gb({type:t,selectors:[["reviews-page"]],viewQuery:function(t,e){var s;1&t&&n.wc(c.a,!0),2&t&&n.oc(s=n.bc())&&(e.sort=s.first)},decls:23,vars:5,consts:[["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","store.description"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product.title"],["matColumnDef","message"],["matColumnDef","score"],["matColumnDef","status"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["size","18",3,"value"],["mat-header-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(n.Sb(0,"mat-content"),n.Ac(1,w,1,0,"mat-progress-bar",0),n.Sb(2,"table",1),n.Qb(3,2),n.Ac(4,g,2,0,"th",3),n.Ac(5,C,2,1,"td",4),n.Pb(),n.Qb(6,5),n.Ac(7,R,2,0,"th",3),n.Ac(8,A,2,1,"td",4),n.Pb(),n.Qb(9,6),n.Ac(10,S,2,0,"th",3),n.Ac(11,x,2,1,"td",4),n.Pb(),n.Qb(12,7),n.Ac(13,z,2,0,"th",3),n.Ac(14,I,2,1,"td",4),n.Pb(),n.Qb(15,8),n.Ac(16,k,2,0,"th",3),n.Ac(17,D,3,7,"td",4),n.Pb(),n.Qb(18,9),n.Ac(19,P,1,0,"th",10),n.Ac(20,y,4,0,"td",4),n.Pb(),n.Ac(21,M,1,0,"tr",11),n.Ac(22,j,1,0,"tr",12),n.Rb(),n.Rb()),2&t&&(n.Ab(1),n.kc("ngIf",e.loading),n.Ab(1),n.kc("dataSource",e.reviews),n.Ab(19),n.kc("matHeaderRowDef",e.columns)("matHeaderRowDefSticky",!0),n.Ab(1),n.kc("matRowDefColumns",e.columns))},directives:[b.a,p.m,r.n,c.a,r.c,r.i,r.b,r.k,r.m,m.a,r.h,c.b,r.a,f,v.a,h.a,r.j,r.l],styles:[".mat-column-score[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{width:200px}.mat-column-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px 10px;font-size:12px!important;border-radius:12px;background-color:#e0e0e0}.mat-column-status[_ngcontent-%COMP%]   span.pending[_ngcontent-%COMP%]{color:#fff;background-color:#2196f3}.mat-column-status[_ngcontent-%COMP%]   span.rejected[_ngcontent-%COMP%]{color:#fff;background-color:#f44336}.mat-column-status[_ngcontent-%COMP%]   span.approved[_ngcontent-%COMP%]{color:#fff;background-color:#4caf50}"]}),t})(),_=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},imports:[[p.c,h.b]]}),t})();var E=s("5Yg0"),N=s("gyTc"),Q=s("R32p"),H=s("qFsG"),$=s("A5z7"),G=s("d3UM"),J=s("FKr1"),K=s("tVzd"),T=s("H0Zp"),F=s("kmnG"),q=s("tyNb"),V=s("3Pt+");const X=[{path:"",component:O}];let Z=(()=>{class t{}return t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({factory:function(e){return new(e||t)},imports:[[V.i,_,p.c,E.a,Q.a,c.c,c.c,N.a,h.b,r.p,$.e,H.b,J.p,v.b,G.b,K.a,T.a,F.e,V.r,m.b,q.e.forChild(X)]]}),t})()}}]);