(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZntH:function(e,i,t){"use strict";t.d(i,"a",(function(){return h}));var n=t("AytR"),a=t("fXoL"),l=t("WF9o"),o=t("FKr1"),s=t("ofXK"),r=t("Xa2L"),d=t("NFeN");const c=["image"];function p(e,i){1&e&&a.Qb(0,"mat-spinner",6),2&e&&a.oc("diameter",40)}function g(e,i){1&e&&(a.Vb(0,"mat-icon"),a.Bc(1," attach_file "),a.Ub())}let h=(()=>{class e{constructor(e){this.localstorage=e,this.error=new a.o,this.valid=new a.o,this.result=new a.o,this.filesToUpload=[]}open(e){document.getElementById("fileUploaderInput").click()}fileChangeEvent(e){this.filesToUpload=e.target.files,this.filesToUpload.length>0&&this.makeFileRequest(n.a.drive+"/drive/files/upload",[],this.filesToUpload).then(e=>{this.file=n.a.drive+"/drive/files/get?fileId="+e.fileId+"&token="+e.token,this.result.emit(this.file)},e=>{this.error.emit(e)})}makeFileRequest(e,i,t){return new Promise((a,l)=>{for(var o=new FormData,s=new XMLHttpRequest,r=0;r<t.length;r++)o.append("uploads[]",t[r],t[r].name);s.onreadystatechange=e=>{4==s.readyState&&(200==s.status?a(JSON.parse(s.response)):l(s.response))},i="?email="+this.localstorage.get("email")+"&appId="+n.a.appId,s.open("POST",e+i,!0),s.setRequestHeader("Authorization",this.localstorage.get("token")),s.send(o)})}ngOnInit(){this.imageElement=this.imageElement.nativeElement,void 0!==this.imageElement.src&&""!=this.imageElement.src||(this.imageElement.style.display="none"),this.imageElement.onload=e=>{this.valid.emit(!0),this.invalid=!1,this.loading=!1,e.target.style.display="block"},this.imageElement.onerror=e=>{-1==e.target.src.indexOf("null")&&(delete this.file,this.valid.emit(!1),this.invalid=!0,this.loading=!1)}}ngOnChanges(e){e.file?(this.file=e.file.currentValue,void 0!==this.file&&""!=this.file?(this.valid.emit(!0),this.invalid=!1,this.loading=!0):(this.valid.emit(!1),this.invalid=!0)):(this.valid.emit(!1),this.invalid=!0),e.accept&&(this.accept=e.accept.currentValue),e.disabled&&(this.disabled=e.disabled.currentValue)}}return e.\u0275fac=function(i){return new(i||e)(a.Pb(l.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-file-upload"]],viewQuery:function(e,i){var t;1&e&&a.yc(c,!0),2&e&&a.rc(t=a.ec())&&(i.imageElement=t.first)},inputs:{file:"file",accept:"accept",required:"required",disabled:"disabled"},outputs:{error:"error",valid:"valid",result:"result"},features:[a.Ab],decls:6,vars:7,consts:[["matRipple","",1,"file-upload-container",3,"matRippleDisabled","click"],["id","fileUploaderInput","type","file",3,"accept","change"],["draggable","false",3,"src"],["image",""],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"diameter"]],template:function(e,i){1&e&&(a.Vb(0,"div",0),a.dc("click",(function(e){return!i.disabled&&i.open(e)})),a.Vb(1,"input",1),a.dc("change",(function(e){return i.fileChangeEvent(e)})),a.Ub(),a.Qb(2,"img",2,3),a.Ac(4,p,1,1,"mat-spinner",4),a.Ac(5,g,2,0,"mat-icon",5),a.Ub()),2&e&&(a.Fb("invalid",i.invalid),a.oc("matRippleDisabled",i.disabled),a.Cb(1),a.oc("accept",i.accept),a.Cb(1),a.oc("src",i.file,a.vc),a.Cb(2),a.oc("ngIf",i.loading),a.Cb(1),a.oc("ngIf",!i.file&&!i.loading))},directives:[o.r,s.m,r.c,d.a],styles:[".file-upload-container[_ngcontent-%COMP%]{width:150px;height:150px;cursor:pointer;border:1px solid #bdbdbd;overflow:hidden;margin-top:15px;text-align:center;border-radius:5px;vertical-align:middle;background-color:#eee}.file-upload-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.file-upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:150px}.file-upload-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#3f51b5;width:48px;height:48px;font-size:48px;margin-top:51px}.invalid[_ngcontent-%COMP%]{border:1px solid #f44336}.invalid[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}mat-spinner[_ngcontent-%COMP%]{margin:55px!important}"]}),e})()}}]);